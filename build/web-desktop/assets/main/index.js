System.register("chunks:///_virtual/BetManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ChipEntry.ts","./EventManager.ts","./GameEvent.ts","./SFXEnums.ts"],(function(t){"use strict";var e,n,i,r,s,a,c,o,u,h,p,l;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){s=t.cclegacy,a=t._decorator,c=t.CCInteger,o=t.Component},function(t){u=t.ChipEntry},function(t){h=t.EventManager},function(t){p=t.GameEvent},function(t){l=t.SFXID}],execute:function(){var E,g,m,f,B,v,C;s._RF.push({},"d08b8Ug3UBL+p75yPU3Garm","BetManager",void 0);var d=a.ccclass,y=a.property;t("BetManager",(E=d("BetManager"),g=y({type:[u]}),m=y({type:c}),E((v=e((B=function(t){function e(){for(var e,n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return e=t.call.apply(t,[this].concat(s))||this,i(e,"chips",v,r(e)),i(e,"maxBet",C,r(e)),e.selectedChips=[],e.currentBet=0,e}n(e,t);var s=e.prototype;return s.start=function(){h.instance.gameEvents.on(p.CHIP_SELECTED,this.addChip,this),h.instance.gameEvents.on(p.GAME_RESET,this.clearBet,this),h.instance.gameEvents.emit(p.CHIP_ENTRY_READY,this.chips,this)},s.onDestroy=function(){h.instance.gameEvents.off(p.CHIP_SELECTED,this.addChip,this)},s.addChip=function(t){this.currentBet+t.value>this.maxBet?console.warn("Max bet reached"):(this.selectedChips.push(t),this.currentBet+=Number(t.value),this.currentBet=Math.round(100*this.currentBet)/100,console.log("Current bet: "+this.currentBet),h.instance.gameEvents.emit(p.ADD_CHIP_UI,t,this),h.instance.gameEvents.emit(p.UPDATE_BET_VALUE,this.currentBet,this),h.instance.gameEvents.emit(p.PLAY_SFX,l.Chip,this))},s.clearBet=function(){this.selectedChips=[],this.currentBet=0,h.instance.gameEvents.emit(p.UPDATE_BET_VALUE,this.currentBet,this)},s.getTotalBet=function(){return this.currentBet},s.getSelectedChips=function(){return[].concat(this.selectedChips)},e}(o)).prototype,"chips",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),C=e(B.prototype,"maxBet",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 500}}),f=B))||f));s._RF.pop()}}}));

System.register("chunks:///_virtual/BGMEntry.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BGMID.ts"],(function(t){"use strict";var e,i,r,n,o,c,u;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.initializerDefineProperty},function(t){r=t.cclegacy,n=t._decorator,o=t.Enum,c=t.AudioClip},function(t){u=t.BGMID}],execute:function(){var l,a,p,s,y,f,M;r._RF.push({},"0f2ddFoKaFM1pQ01xImtet6","BGMEntry",void 0);var d=n.ccclass,b=n.property;t("BGMEntry",(l=d("BGMEntry"),a=b({type:o(u)}),p=b({type:c}),l((f=e((y=function(){i(this,"id",f,this),i(this,"clip",M,this)}).prototype,"id",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return u.MainMenu}}),M=e(y.prototype,"clip",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),s=y))||s));r._RF.pop()}}}));

System.register("chunks:///_virtual/BGMID.ts",["cc"],(function(e){"use strict";var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){var c;e("BGMID",void 0),t._RF.push({},"b78c9uJHqlKbKJKre4ciZIT","BGMID",void 0),function(e){e[e.MainMenu=0]="MainMenu",e[e.Gameplay=1]="Gameplay",e[e.Victory=2]="Victory",e[e.Defeat=3]="Defeat"}(c||(c=e("BGMID",{}))),t._RF.pop()}}}));

System.register("chunks:///_virtual/BGMManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BGMEntry.ts"],(function(e){"use strict";var r,t,i,o,n,a,c,s,u,l;return{setters:[function(e){r=e.applyDecoratedDescriptor,t=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized,n=e.createForOfIteratorHelperLoose},function(e){a=e.cclegacy,c=e._decorator,s=e.AudioSource,u=e.Component},function(e){l=e.BGMEntry}],execute:function(){var p,g,b,f,m,M,h;a._RF.push({},"d8b0frQPh5OJqG1Am8NUgt0","BGMManager",void 0);var y=c.ccclass,v=c.property;e("BGMManager",(p=y("BGMManager"),g=v(s),b=v({type:[l]}),p((M=r((m=function(e){function r(){for(var r,t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return r=e.call.apply(e,[this].concat(n))||this,i(r,"bgmSource",M,o(r)),i(r,"bgmEntries",h,o(r)),r.bgmMap=new Map,r}t(r,e);var a=r.prototype;return a.onLoad=function(){for(var e,r=n(this.bgmEntries);!(e=r()).done;){var t=e.value;this.bgmMap.set(t.id,t.clip)}},a.playBGM=function(e,r){void 0===r&&(r=!0);var t=this.bgmMap.get(e);t&&(this.bgmSource.stop(),this.bgmSource.clip=t,this.bgmSource.loop=r,this.bgmSource.play())},r}(u)).prototype,"bgmSource",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),h=r(m.prototype,"bgmEntries",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),f=m))||f));a._RF.pop()}}}));

System.register("chunks:///_virtual/Card.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CardAsset.ts","./EventManager.ts","./GameEvent.ts","./SFXEnums.ts"],(function(t){"use strict";var e,n,a,r,i,s,c,o,u,l,p,d,f;return{setters:[function(t){e=t.inheritsLoose,n=t.asyncToGenerator,a=t.regeneratorRuntime},function(t){r=t.cclegacy,i=t._decorator,s=t.Sprite,c=t.Component,o=t.tween,u=t.Vec3},function(t){l=t.CardAsset},function(t){p=t.EventManager},function(t){d=t.GameEvent},function(t){f=t.SFXID}],execute:function(){var h;r._RF.push({},"e396avruaJIdbdNpR39MdzA","Card",void 0);var m=i.ccclass;i.property,t("Card",m("Card")(h=function(t){function r(){for(var e,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return(e=t.call.apply(t,[this].concat(a))||this).cardSprite=null,e.rankLabel=null,e.suitLabel=null,e.suit="",e.rank="",e.values=[],e.isFaceDown=!0,e.cardData=null,e}e(r,t);var i=r.prototype;return i.onLoad=function(){this.cardSprite=this.node.getComponent(s)},i.init=function(t){this.suit=t.suit,this.rank=t.rank,this.values=t.values,this.cardSprite||(this.cardSprite=this.node.getComponent(s)),this.cardSprite.spriteFrame=l.backSpriteFrame,this.node.name=t.rank+"_of_"+t.suit,this.cardData=t},i.getValues=function(){return this.values},i.getName=function(){return this.rank+" of "+this.suit},i.flipCard=function(){var t=n(a().mark((function t(){var e,n=this;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.node.scale.clone(),console.log("Flipping card:",this.getName(),"Is face down:",this.cardData.isFaceDown),p.instance.gameEvents.emit(d.PLAY_SFX,f.CardFlip,this),t.next=5,new Promise((function(t){o(n.node).to(.2,{scale:new u(0,e.y,e.z)}).call((function(){n.isFaceDown?n.cardSprite.spriteFrame=n.cardData.spriteFrame:n.cardSprite.spriteFrame=l.backSpriteFrame})).to(.2,{scale:e}).call((function(){n.isFaceDown=!n.isFaceDown,console.log("Card flipped:",n.getName(),"Is face down now:",n.isFaceDown)})).call(t).start()}));case 5:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r}(c))||h);r._RF.pop()}}}));

System.register("chunks:///_virtual/CardAsset.ts",["cc"],(function(t){"use strict";var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"e308akf1GVL3rkWLtL462S8","CardAsset",void 0);t("CardAsset",{backSpriteFrame:null});e._RF.pop()}}}));

System.register("chunks:///_virtual/CardData.ts",["cc"],(function(){"use strict";var t;return{setters:[function(c){t=c.cclegacy}],execute:function(){t._RF.push({},"55ff3nizsVDia/+0bXMjkqg","CardData",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/ChipButton.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventManager.ts","./GameEvent.ts"],(function(t){"use strict";var n,e,i,r,o,s,c,a,p;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy,i=t._decorator,r=t.Sprite,o=t.Label,s=t.Button,c=t.Component},function(t){a=t.EventManager},function(t){p=t.GameEvent}],execute:function(){var u;e._RF.push({},"7e783l0UeJB3bOowfHZqLBZ","ChipButton",void 0);var h=i.ccclass;i.property,t("ChipButton",h("ChipButton")(u=function(t){function e(){for(var n,e=arguments.length,i=new Array(e),r=0;r<e;r++)i[r]=arguments[r];return(n=t.call.apply(t,[this].concat(i))||this).chipEntry=void 0,n.isInteractable=!0,n}n(e,t);var i=e.prototype;return i.setup=function(t){var n=this;this.chipEntry=t,this.node.getComponent(r).spriteFrame=this.chipEntry.sprite,this.node.getComponentInChildren(o).string=this.chipEntry.text,this.node.on(s.EventType.CLICK,(function(){1==n.isInteractable&&a.instance.gameEvents.emit(p.CHIP_SELECTED,n.chipEntry)}),this)},i.setInteractable=function(t){this.isInteractable=t},e}(c))||u);e._RF.pop()}}}));

System.register("chunks:///_virtual/ChipEntry.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,i,r,n,l,o;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.initializerDefineProperty},function(t){r=t.cclegacy,n=t._decorator,l=t.SpriteFrame,o=t.CCFloat}],execute:function(){var u,a,p,c,s,y,f,b;r._RF.push({},"f4b51iIvlxA/byunJlgPqIg","ChipEntry",void 0);var h=n.ccclass,g=n.property;t("ChipEntry",(u=h("ChipEntry"),a=g({type:l}),p=g({type:o}),u((y=e((s=function(){i(this,"sprite",y,this),i(this,"value",f,this),i(this,"text",b,this)}).prototype,"sprite",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=e(s.prototype,"value",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),b=e(s.prototype,"text",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),c=s))||c));r._RF.pop()}}}));

System.register("chunks:///_virtual/Dealer.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Participant.ts"],(function(t){"use strict";var e,n,r;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy},function(t){r=t.Participant}],execute:function(){n._RF.push({},"4053843dDZINYWydrxSAKS8","Dealer",void 0);t("Dealer",function(t){function n(){return t.apply(this,arguments)||this}return e(n,t),n.prototype.shouldHit=function(){return this.getHandValue()<17},n}(r));n._RF.pop()}}}));

System.register("chunks:///_virtual/Deck.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var r,s;return{setters:[function(t){r=t.extends},function(t){s=t.cclegacy}],execute:function(){s._RF.push({},"4e0a8nNSDNOJqxynrmrj65G","Deck",void 0);t("Deck",function(){function t(t,r){void 0===r&&(r=1),this.cards=[],this.buildDeck(t,r),this.shuffle()}var s=t.prototype;return s.buildDeck=function(t,s){this.cards=[];for(var n=0;n<s;n++){var i;(i=this.cards).push.apply(i,t.map((function(t){return r({},t)})))}},s.shuffle=function(){for(var t=this.cards.length-1;t>0;t--){var r=Math.floor(Math.random()*(t+1)),s=[this.cards[r],this.cards[t]];this.cards[t]=s[0],this.cards[r]=s[1]}},s.peak=function(t){return t>=0&&t<this.cards.length?this.cards[t]:null},s.deal=function(){return this.cards.length>0?this.cards.pop():null},s.remaining=function(){return this.cards.length},s.reset=function(t,r){void 0===r&&(r=1),this.buildDeck(t,r),this.shuffle()},t}());s._RF.pop()}}}));

System.register("chunks:///_virtual/DeckManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CardAsset.ts","./Deck.ts","./EventManager.ts","./GameEvent.ts"],(function(e){"use strict";var t,r,a,n,o,s,i,c,d,l,u,p,f,h;return{setters:[function(e){t=e.inheritsLoose,r=e.asyncToGenerator,a=e.regeneratorRuntime},function(e){n=e.cclegacy,o=e._decorator,s=e.resources,i=e.JsonAsset,c=e.SpriteFrame,d=e.SpriteAtlas,l=e.Component},function(e){u=e.CardAsset},function(e){p=e.Deck},function(e){f=e.EventManager},function(e){h=e.GameEvent}],execute:function(){var m;n._RF.push({},"ed462+8DFFGPJCNknxnkNxE","DeckManager",void 0);var D=o.ccclass;o.property,e("DeckManager",D("DeckManager")(m=function(e){function n(){for(var t,r=arguments.length,a=new Array(r),n=0;n<r;n++)a[n]=arguments[n];return(t=e.call.apply(e,[this].concat(a))||this).loadedCardData=[],t.cardDeck=null,t}t(n,e);var o=n.prototype;return o.start=function(){this.loadedCardData.length;f.instance.gameEvents.on(h.GAME_RESET,this.resetDeck,this)},o.onDestroy=function(){f.instance.gameEvents.off(h.GAME_RESET,this.resetDeck,this)},o.onLoad=function(){var e=this;s.load("deck",i,(function(t,r){t?console.error("Failed to load card data:",t):(e.loadedCardData=r.json,e.loadSpriteFromAtlas())}))},o.loadSprites=function(){var e=this,t=this.loadedCardData.map((function(t){return e.loadSpriteFrame("sprites/Cards/"+t.sprite+"/spriteFrame").then((function(e){t.spriteFrame=e})).catch((function(e){console.error("Failed to load sprite for "+t.rank+" of "+t.suit+":",e)}))}));t.push(u.backSpriteFrame?Promise.resolve():this.loadSpriteFrame("sprites/Cards/back01/spriteFrame").then((function(e){u.backSpriteFrame=e}))),Promise.all(t).then((function(){console.log("All sprites loaded, starting game..."),e.cardDeck=new p(e.loadedCardData,2),f.instance.gameEvents.emit(h.DECK_LOADED)})).catch((function(e){console.error("Error loading deck:",e)}))},o.loadSpriteFrame=function(e){return new Promise((function(t,r){s.load(e,c,(function(e,a){e?r(e):t(a)}))}))},o.loadSpriteAtlas=function(){return new Promise((function(e,t){s.load("Cards/card",d,(function(r,a){r?(console.error("Atlas load error:",r),t(r)):(console.log("Atlas load success"),e(a))}))}))},o.loadSpriteFromAtlas=function(){var e=r(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadSpriteAtlas();case 2:t=e.sent,this.loadedCardData.forEach((function(e){var r=t.getSpriteFrame(e.sprite);r?e.spriteFrame=r:console.error("Failed to load spriteFrame:"+e.sprite)})),u.backSpriteFrame=t.getSpriteFrame("BACK_1"),this.cardDeck=new p(this.loadedCardData,2),f.instance.gameEvents.emit(h.DECK_LOADED);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),o.dealCard=function(){return this.cardDeck?this.cardDeck.deal():null},o.resetDeck=function(){this.loadedCardData.length>0&&(console.log("Resetting deck..."),this.cardDeck.reset(this.loadedCardData,2),f.instance.gameEvents.emit(h.DECK_LOADED))},n}(l))||m);n._RF.pop()}}}));

System.register("chunks:///_virtual/EventManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var n,t,r,s,a,c;return{setters:[function(e){n=e.inheritsLoose,t=e.createClass},function(e){r=e.cclegacy,s=e._decorator,a=e.EventTarget,c=e.Component}],execute:function(){var i,o;r._RF.push({},"720c6VaEflArbOlZ8L86/KH","EventManager",void 0);var u=s.ccclass;s.property,e("EventManager",u("EventManager")(((o=function(e){function r(){var n;return(n=e.call(this)||this).gameEvents=void 0,n.sfxEvents=void 0,n.gameEvents=new a,n}return n(r,e),t(r,null,[{key:"instance",get:function(){return this._instance||(this._instance=new r),this._instance}}]),r}(c))._instance=void 0,i=o))||i);r._RF.pop()}}}));

System.register("chunks:///_virtual/GameEvent.ts",["cc"],(function(e){"use strict";var E;return{setters:[function(e){E=e.cclegacy}],execute:function(){var t;e("GameEvent",void 0),E._RF.push({},"c06c4NK4XlKCIImdeZl1QdI","GameEvent",void 0),function(e){e[e.CHIP_ENTRY_READY=0]="CHIP_ENTRY_READY",e[e["chip-entry-ready"]=1]="chip-entry-ready",e[e.CHIP_SELECTED=2]="CHIP_SELECTED",e[e["chip-selected"]=3]="chip-selected",e[e.ADD_CHIP_UI=4]="ADD_CHIP_UI",e[e["add-chip-ui"]=5]="add-chip-ui",e[e.UPDATE_BET_VALUE=6]="UPDATE_BET_VALUE",e[e["add-bet-value"]=7]="add-bet-value",e.DECK_LOADED="deck-loaded",e.DEAL_CARD="deal-card",e.ANIMATION_FINISHED="animation-finished",e.SPLIT_HAND="split-hand",e.CHANGE_HAND="change-hand",e.DEALER_TURN_END="dealer-turn-end",e.GAME_STARTED="game-started",e.GAME_ENDED="game-ended",e.GAME_RESET="game-reset",e.LOCK_INPUT="lock-input",e.UNLOCK_INPUT="unlock-input",e.PLAY_SFX="play-sfx"}(t||(t=e("GameEvent",{}))),E._RF.pop()}}}));

System.register("chunks:///_virtual/GameManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./DeckManager.ts","./EventManager.ts","./GameEvent.ts","./GameState.ts","./Player.ts","./Dealer.ts"],(function(e){"use strict";var n,t,a,s,i,r,l,d,c,h,o,u,m;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,a=e.initializerDefineProperty,s=e.assertThisInitialized},function(e){i=e.cclegacy,r=e._decorator,l=e.Component},function(e){d=e.DeckManager},function(e){c=e.EventManager},function(e){h=e.GameEvent},function(e){o=e.GameState},function(e){u=e.Player},function(e){m=e.Dealer}],execute:function(){var g,y,E,p,D;i._RF.push({},"08c86QVXQtNfqsdntmI/7E9","GameManager",void 0);var I=r.ccclass,H=r.property;e("GameManager",(g=I("GameManager"),y=H(d),g((D=n((p=function(e){function n(){for(var n,t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return n=e.call.apply(e,[this].concat(i))||this,a(n,"deckManager",D,s(n)),n.players=[],n.dealer=new m,n.gameState=o.InitialDeal,n.currentHandIndex=0,n}t(n,e);var i=n.prototype;return i.start=function(){c.instance.gameEvents.on(h.DECK_LOADED,this.onDeckLoaded,this),c.instance.gameEvents.on(h.ANIMATION_FINISHED,this.onAnimationFinished,this),this.players.push(new u("Player 1",0))},i.onDestroy=function(){c.instance.gameEvents.off(h.DECK_LOADED,this.onDeckLoaded,this),c.instance.gameEvents.off(h.ANIMATION_FINISHED,this.onAnimationFinished,this)},i.onDeckLoaded=function(e){console.log("Game started with deck:",e)},i.initialDeal=function(){c.instance.gameEvents.emit(h.LOCK_INPUT);for(var e=0;e<2;e++){var n=this.deckManager.dealCard(),t=this.deckManager.dealCard();n&&this.players[this.currentHandIndex].addCard(n),t&&this.dealer.addCard(t)}c.instance.gameEvents.emit(h.DEAL_CARD,this.players[this.currentHandIndex]),c.instance.gameEvents.emit(h.DEAL_CARD,this.dealer)},i.onAnimationFinished=function(e){if(console.log("Animation finished for:",e instanceof u?"Player":"Dealer"),this.gameState===o.InitialDeal&&e instanceof u&&(this.gameState=o.PlayerTurn,c.instance.gameEvents.emit(h.GAME_STARTED,this.players[this.currentHandIndex]),(this.players[this.currentHandIndex].hasBlackjack()||this.dealer.hasBlackjack())&&(this.dealer.revealAll=!0,this.endGame())),this.gameState===o.PlayerTurn&&e instanceof u&&this.players[this.currentHandIndex].isBusted()&&(this.currentHandIndex+1==this.players.length?this.dealerPlay():(this.currentHandIndex++,c.instance.gameEvents.emit(h.CHANGE_HAND,this.currentHandIndex))),this.gameState===o.PlayerTurnEnd&&e instanceof u&&(this.dealer.revealAll=!0,this.dealerPlay()),this.gameState===o.DealerTurnEnd&&e instanceof m){this.gameState=o.GameEnd;var n=this.determineWinner();c.instance.gameEvents.emit(h.GAME_ENDED,n)}c.instance.gameEvents.emit(h.UNLOCK_INPUT)},i.playerHit=function(){c.instance.gameEvents.emit(h.LOCK_INPUT);var e=this.deckManager.dealCard();e&&(this.players[this.currentHandIndex].addCard(e),console.log("Hand "+this.currentHandIndex+" count: "+this.players[this.currentHandIndex].getHand().length),c.instance.gameEvents.emit(h.DEAL_CARD,this.players[this.currentHandIndex]))},i.playerStand=function(){c.instance.gameEvents.emit(h.LOCK_INPUT),console.log("Player stands with hand:",this.players[this.currentHandIndex].getHand()),this.currentHandIndex+1==this.players.length?this.dealerPlay():(this.currentHandIndex++,c.instance.gameEvents.emit(h.CHANGE_HAND,this.currentHandIndex),c.instance.gameEvents.emit(h.UNLOCK_INPUT))},i.playerDouble=function(){c.instance.gameEvents.emit(h.LOCK_INPUT);var e=this.deckManager.dealCard();e&&(this.players[this.currentHandIndex].addCard(e),c.instance.gameEvents.emit(h.DEAL_CARD,this.players[this.currentHandIndex])),this.currentHandIndex+1==this.players.length?this.gameState=o.PlayerTurnEnd:(this.currentHandIndex++,c.instance.gameEvents.emit(h.CHANGE_HAND,this.currentHandIndex))},i.playerSplit=function(){if(console.log("player split"),this.players[this.currentHandIndex].canSplit()){var e=this.players[this.currentHandIndex].splitHand(),n=new u("Player 1",this.currentHandIndex+1);n.addCard(e),this.players.push(n),c.instance.gameEvents.emit(h.SPLIT_HAND)}},i.dealerPlay=function(){for(c.instance.gameEvents.emit(h.LOCK_INPUT),this.gameState=o.DealerTurn,this.players.every((function(e){return e.isBusted()}))&&(console.log("All player's hands are busted"),this.endGame());this.dealer.shouldHit();){var e=this.deckManager.dealCard();e&&(this.dealer.addCard(e),console.log("Dealer hits and receives:",e),c.instance.gameEvents.emit(h.DEAL_CARD,this.dealer))}console.log("Dealer Hand now:",this.dealer.getHand()),this.endGame()},i.determineWinner=function(){console.log("Determining winner...");var e=this.players[this.currentHandIndex].getHandValue(),n=this.dealer.getHandValue();return this.players[this.currentHandIndex].hasBlackjack()&&this.dealer.hasBlackjack()?"It's a tie with both having Blackjack!":this.players[this.currentHandIndex].hasBlackjack()?"Player wins with Blackjack!":this.dealer.hasBlackjack()?"Dealer wins with Blackjack!":this.players[this.currentHandIndex].isBusted()?"Dealer wins! Player busted.":this.dealer.isBusted()?"Player wins! Dealer busted.":e>n?"Player wins!":n>e?"Dealer wins!":"It's a tie!"},i.endGame=function(){c.instance.gameEvents.emit(h.DEALER_TURN_END),this.gameState=o.DealerTurnEnd},i.resetGame=function(){this.players.forEach((function(e){e.resetHand()})),this.players=[],this.players.push(new u("Player 1",0)),this.dealer.resetHand(),this.dealer.revealAll=!1,c.instance.gameEvents.emit(h.GAME_RESET),this.gameState=o.InitialDeal,this.currentHandIndex=0},n}(l)).prototype,"deckManager",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=p))||E));i._RF.pop()}}}));

System.register("chunks:///_virtual/GameState.ts",["cc"],(function(e){"use strict";var a;return{setters:[function(e){a=e.cclegacy}],execute:function(){var n;e("GameState",void 0),a._RF.push({},"5400f0RNPJKirsI/V6j5FAh","GameState",void 0),function(e){e[e.BetPhase=0]="BetPhase",e[e.InitialDeal=1]="InitialDeal",e[e.PlayerTurn=2]="PlayerTurn",e[e.PlayerTurnEnd=3]="PlayerTurnEnd",e[e.DealerTurn=4]="DealerTurn",e[e.DealerTurnEnd=5]="DealerTurnEnd",e[e.GameEnd=6]="GameEnd"}(n||(n=e("GameState",{}))),a._RF.pop()}}}));

System.register("chunks:///_virtual/GenericPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PopupAnimationType.ts"],(function(t){"use strict";var e,n,i,o,a,r,s,l,u,p,c,h,f,b,y,m,P;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized,a=t.createForOfIteratorHelperLoose},function(t){r=t.cclegacy,s=t._decorator,l=t.Enum,u=t.Vec3,p=t.Label,c=t.Node,h=t.Prefab,f=t.view,b=t.tween,y=t.Component,m=t.instantiate},function(t){P=t.PopupAnimationType}],execute:function(){var g,w,T,d,v,z,S,D,x,A,F,k,C,E,L,B,_,G;r._RF.push({},"6906bO5ZJxLTKlisCgF8PU1","GenericPopup",void 0);var O=s.ccclass,R=s.property;t("GenericPopup",(g=O("GenericPopup"),w=R({type:l(P)}),T=R({type:l(P)}),d=R(u),v=R(p),z=R(p),S=R(c),D=R(h),g((F=e((A=function(t){function e(){for(var e,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return(e=t.call.apply(t,[this].concat(a))||this).screenSize=f.getVisibleSize(),e.popupPanel=void 0,i(e,"animationDuration",F,o(e)),i(e,"entryAnimationType",k,o(e)),i(e,"exitAnimationType",C,o(e)),i(e,"onscreenTarget",E,o(e)),i(e,"titleText",L,o(e)),i(e,"messageText",B,o(e)),i(e,"buttonContainer",_,o(e)),i(e,"defaultButtonPrefab",G,o(e)),e.isShown=!1,e}n(e,t);var r=e.prototype;return r.start=function(){this.popupPanel=this.node},r.show=function(t,e,n,i,o){var r=this;this.titleText.string=t,this.messageText.string=e,this.entryAnimationType=i||this.entryAnimationType,this.exitAnimationType=o||this.exitAnimationType,this.buttonContainer.removeAllChildren();for(var s,l=function(){var t=s.value,e=t.buttonPrefabOverride||r.defaultButtonPrefab,n=m(e);r.buttonContainer.addChild(n);var i=n.getComponentInChildren(p);i&&(i.string=t.label),n.on(c.EventType.TOUCH_END,(function(){null==t.callback||t.callback(),r.close()}))},u=a(n);!(s=u()).done;)l();this.node.active=!0,this.animateEntry(),this.isShown=!0},r.close=function(){var t=this;this.animateExit((function(){t.node.active=!1})),this.isShown=!1},r.shown=function(){return this.isShown},r.animateEntry=function(t){switch(this.entryAnimationType){case P.FlyBottom:this.popupPanel.setPosition(new u(0,-this.screenSize.height,0)),b(this.popupPanel).to(this.animationDuration,{position:this.onscreenTarget}).call((function(){return null==t?void 0:t()})).start();break;case P.FlyTop:this.popupPanel.setPosition(new u(0,this.screenSize.height,0)),b(this.popupPanel).to(this.animationDuration,{position:this.onscreenTarget}).call((function(){return null==t?void 0:t()})).start();break;case P.FlyLeft:this.popupPanel.setPosition(new u(-this.screenSize.width,0,0)),b(this.popupPanel).to(this.animationDuration,{position:this.onscreenTarget}).call((function(){return null==t?void 0:t()})).start();break;case P.FlyRight:this.popupPanel.setPosition(new u(this.screenSize.width,0,0)),b(this.popupPanel).to(this.animationDuration,{position:this.onscreenTarget}).call((function(){return null==t?void 0:t()})).start();break;case P.Scale:this.popupPanel.setScale(new u(0,0,1)),b(this.popupPanel).to(this.animationDuration,{scale:new u(1,1,1)}).call((function(){return null==t?void 0:t()})).start()}},r.animateExit=function(t){switch(this.exitAnimationType){case P.FlyBottom:this.popupPanel.setPosition(this.onscreenTarget),b(this.popupPanel).to(this.animationDuration,{position:new u(0,-this.screenSize.height,0)}).call((function(){return null==t?void 0:t()})).start();break;case P.FlyTop:this.popupPanel.setPosition(this.onscreenTarget),b(this.popupPanel).to(this.animationDuration,{position:new u(0,this.screenSize.height,0)}).call((function(){return null==t?void 0:t()})).start();break;case P.FlyLeft:this.popupPanel.setPosition(this.onscreenTarget),b(this.popupPanel).to(this.animationDuration,{position:new u(-this.screenSize.width,0,0)}).call((function(){return null==t?void 0:t()})).start();break;case P.FlyRight:this.popupPanel.setPosition(this.onscreenTarget),b(this.popupPanel).to(this.animationDuration,{position:new u(this.screenSize.width,0,0)}).call((function(){return null==t?void 0:t()})).start();break;case P.Scale:this.popupPanel.setScale(new u(1,1,1)),b(this.popupPanel).to(this.animationDuration,{scale:new u(0,0,1)}).call((function(){return null==t?void 0:t()})).start()}},e}(y)).prototype,"animationDuration",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.75}}),k=e(A.prototype,"entryAnimationType",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return P.FlyTop}}),C=e(A.prototype,"exitAnimationType",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return P.FlyTop}}),E=e(A.prototype,"onscreenTarget",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new u(0,0,0)}}),L=e(A.prototype,"titleText",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=e(A.prototype,"messageText",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=e(A.prototype,"buttonContainer",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=e(A.prototype,"defaultButtonPrefab",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=A))||x));r._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./BGMEntry.ts","./BGMID.ts","./BGMManager.ts","./SFXEntry.ts","./SFXEnums.ts","./SFXManager.ts","./Card.ts","./CardAsset.ts","./CardData.ts","./ChipButton.ts","./ChipEntry.ts","./ObjectPool.ts","./PoolExhaustedBehavior.ts","./Poolable.ts","./SpecialQueue.ts","./Dealer.ts","./Deck.ts","./BetManager.ts","./DeckManager.ts","./EventManager.ts","./GameManager.ts","./UIManager.ts","./Participant.ts","./Player.ts","./GenericPopup.ts","./PopupButtonData.ts","./GameEvent.ts","./GameState.ts","./PopupAnimationType.ts"],(function(){"use strict";return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/ObjectPool.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PoolExhaustedBehavior.ts","./Poolable.ts","./SpecialQueue.ts"],(function(e){"use strict";var t,o,i,n,a,r,s,l,u,c,h,p,d,b;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){a=e.cclegacy,r=e._decorator,s=e.Prefab,l=e.Enum,u=e.instantiate,c=e.Vec3,h=e.Component},function(e){p=e.PoolExhaustedBehavior},function(e){d=e.Poolable},function(e){b=e.SpecialQueue}],execute:function(){var v,f,P,m,w,y,N,x,g,j;a._RF.push({},"dcb0dg8K4xBbqzH5L9Py4kP","ObjectPool",void 0);var z=r.ccclass,C=r.property;e("ObjectPool",(v=z("ObjectPool"),f=C(s),P=C({type:l(p)}),m=C({visible:function(){return this.exhaustBehavior===p.ExpandWithLimit}}),v((N=t((y=function(e){function t(){for(var t,o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return t=e.call.apply(e,[this].concat(a))||this,i(t,"objectToPool",N,n(t)),i(t,"amountToPool",x,n(t)),i(t,"exhaustBehavior",g,n(t)),i(t,"maxPoolSize",j,n(t)),t.availableNodes=[],t.spawnedNodes=new b,t}o(t,e);var a=t.prototype;return a.onLoad=function(){for(var e=0;e<this.amountToPool;e++){var t=u(this.objectToPool);(t.getComponent(d)||t.addComponent(d)).init(this),t.active=!1,t.setParent(this.node),this.availableNodes.push(t)}},a.pop=function(){if(this.availableNodes.length>0){var e=this.availableNodes.pop();return this.spawnedNodes.enqueue(e),e}switch(this.exhaustBehavior){case p.CreateNew:var t=u(this.objectToPool);return(t.getComponent(d)||t.addComponent(d)).init(this),t.active=!1,t.setParent(this.node),this.spawnedNodes.enqueue(t),t;case p.Recycle:if(this.spawnedNodes.count>0){var o=this.spawnedNodes.dequeue();return this.spawnedNodes.enqueue(o),o}break;case p.ExpandWithLimit:if(this.spawnedNodes.count<this.maxPoolSize){var i=u(this.objectToPool);return(i.getComponent(d)||i.addComponent(d)).init(this),i.active=!1,i.setParent(this.node),this.spawnedNodes.enqueue(i),i}break;case p.FailSilently:console.warn("Pool is empty")}return null},a.push=function(e){e.active=!1,e.setPosition(c.ZERO),-1===this.availableNodes.findIndex((function(t){return t===e}))&&this.availableNodes.push(e),this.spawnedNodes.remove(e)},t}(h)).prototype,"objectToPool",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=t(y.prototype,"amountToPool",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),g=t(y.prototype,"exhaustBehavior",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return p.CreateNew}}),j=t(y.prototype,"maxPoolSize",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 50}}),w=y))||w));a._RF.pop()}}}));

System.register("chunks:///_virtual/Participant.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var n,e;return{setters:[function(t){n=t.createForOfIteratorHelperLoose},function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"9ca24YcEl5GJ5Pn06S+f3Im","Participant",void 0);t("Participant",function(){function t(){this.hand=[],this.revealAll=!1}var e=t.prototype;return e.getHand=function(){return this.hand},e.isBusted=function(){return this.getHandValue()>21},e.hasBlackjack=function(){return 21===this.getHandValue()&&2===this.hand.length},e.addCard=function(t){this.hand.push(t)},e.resetHand=function(){this.hand=[]},e.getHandValue=function(){for(var t,e=0,a=0,r=n(this.hand);!(t=r()).done;){var i=t.value;2===i.values.length&&a++,e+=i.values[0]}for(;a>0&&e+10<=21;)e+=10,a--;return e},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/Player.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Participant.ts"],(function(n){"use strict";var t,e,i;return{setters:[function(n){t=n.inheritsLoose},function(n){e=n.cclegacy},function(n){i=n.Participant}],execute:function(){e._RF.push({},"25a22NSb3dOsbaCb3GsIrA5","Player",void 0);n("Player",function(n){function e(t,e){var i;return(i=n.call(this)||this).name=void 0,i.index=void 0,i.name=t,i.index=e,i}t(e,n);var i=e.prototype;return i.getName=function(){return this.name},i.getIndex=function(){return this.index},i.canSplit=function(){return!0},i.splitHand=function(){return this.hand.splice(1,1)[0]},e}(i));e._RF.pop()}}}));

System.register("chunks:///_virtual/Poolable.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(o){"use strict";var t,e,n,l;return{setters:[function(o){t=o.inheritsLoose},function(o){e=o.cclegacy,n=o._decorator,l=o.Component}],execute:function(){var r;e._RF.push({},"68ed1lWa6NO95vvwJkFw7ii","Poolable",void 0);var i=n.ccclass;n.property,o("Poolable",i("Poolable")(r=function(o){function e(){for(var t,e=arguments.length,n=new Array(e),l=0;l<e;l++)n[l]=arguments[l];return(t=o.call.apply(o,[this].concat(n))||this).pool=null,t}t(e,o);var n=e.prototype;return n.init=function(o){this.pool=o},n.onDisable=function(){this.pool&&this.pool.push(this.node)},e}(l))||r);e._RF.pop()}}}));

System.register("chunks:///_virtual/PoolExhaustedBehavior.ts",["cc"],(function(e){"use strict";var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){var i;e("PoolExhaustedBehavior",void 0),t._RF.push({},"34d28CN/thEupEm2h8pXQBw","PoolExhaustedBehavior",void 0),function(e){e[e.CreateNew=0]="CreateNew",e[e.Recycle=1]="Recycle",e[e.ExpandWithLimit=2]="ExpandWithLimit",e[e.FailSilently=3]="FailSilently"}(i||(i=e("PoolExhaustedBehavior",{}))),t._RF.pop()}}}));

System.register("chunks:///_virtual/PopupAnimationType.ts",["cc"],(function(t){"use strict";var o;return{setters:[function(t){o=t.cclegacy}],execute:function(){var e;t("PopupAnimationType",void 0),o._RF.push({},"b65e20uSPxEfJAgYL3V66I3","PopupAnimationType",void 0),function(t){t[t.FlyTop=0]="FlyTop",t[t.FlyBottom=1]="FlyBottom",t[t.FlyLeft=2]="FlyLeft",t[t.FlyRight=3]="FlyRight",t[t.Scale=4]="Scale"}(e||(e=t("PopupAnimationType",{}))),o._RF.pop()}}}));

System.register("chunks:///_virtual/PopupButtonData.ts",["cc"],(function(){"use strict";var t;return{setters:[function(u){t=u.cclegacy}],execute:function(){t._RF.push({},"f721cFwx/5PIoSeXluJNJU2","PopupButtonData",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/SFXEntry.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SFXEnums.ts"],(function(t){"use strict";var i,e,r,n,o,u,c,l;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.initializerDefineProperty},function(t){r=t.cclegacy,n=t._decorator,o=t.Enum,u=t.AudioClip},function(t){c=t.SFXID,l=t.SFXGroup}],execute:function(){var p,a,s,y,f,b,g,F,h;r._RF.push({},"471af6pXA5Iwqgv8g5QsV4C","SFXEntry",void 0);var S=n.ccclass,X=n.property;t("SFXEntry",(p=S("SFXEntry"),a=X({type:o(c)}),s=X({type:u}),y=X({type:o(l)}),p((g=i((b=function(){e(this,"id",g,this),e(this,"clip",F,this),e(this,"group",h,this)}).prototype,"id",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return c.ButtonClick}}),F=i(b.prototype,"clip",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=i(b.prototype,"group",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return l.UI}}),f=b))||f));r._RF.pop()}}}));

System.register("chunks:///_virtual/SFXEnums.ts",["cc"],(function(i){"use strict";var t;return{setters:[function(i){t=i.cclegacy}],execute:function(){var n,e;i({SFXGroup:void 0,SFXID:void 0}),t._RF.push({},"b0bb6ld4SlOibz8GEz/cpaU","SFXEnums",void 0),function(i){i[i.ButtonClick=0]="ButtonClick",i[i.CoinDrop=1]="CoinDrop",i[i.CardDeal=2]="CardDeal",i[i.CardFlip=3]="CardFlip",i[i.Chip=4]="Chip"}(n||(n=i("SFXID",{}))),function(i){i[i.UI=0]="UI",i[i.Gameplay=1]="Gameplay",i[i.Ambient=2]="Ambient"}(e||(e=i("SFXGroup",{}))),t._RF.pop()}}}));

System.register("chunks:///_virtual/SFXManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SFXEntry.ts","./EventManager.ts","./GameEvent.ts"],(function(e){"use strict";var t,r,n,o,i,a,s,u,p,c,l,f,g,h;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized,i=e.createForOfIteratorHelperLoose},function(e){a=e.cclegacy,s=e._decorator,u=e.Prefab,p=e.instantiate,c=e.AudioSource,l=e.Component},function(e){f=e.SFXEntry},function(e){g=e.EventManager},function(e){h=e.GameEvent}],execute:function(){var y,v,d,M,S,m,F;a._RF.push({},"0b72cq4oRhOArFtlZJsdFdL","SFXManager",void 0);var b=s.ccclass,E=s.property;e("SFXManager",(y=b("SFXManager"),v=E({type:u}),d=E({type:[f]}),y((m=t((S=function(e){function t(){for(var t,r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t=e.call.apply(e,[this].concat(i))||this,n(t,"sfxAudioSourcePrefab",m,o(t)),n(t,"sfxEntries",F,o(t)),t.sfxMap=new Map,t.groupMap=new Map,t.groupVolumes=new Map,t}r(t,e);var a=t.prototype;return a.onLoad=function(){for(var e,t=i(this.sfxEntries);!(e=t()).done;){var r=e.value,n=p(this.sfxAudioSourcePrefab);n.setParent(this.node),n.active=!1;var o=n.getComponent(c);o.clip=r.clip,this.sfxMap.set(r.id,o),this.groupMap.has(r.group)||this.groupMap.set(r.group,[]),this.groupMap.get(r.group).push(o),this.groupVolumes.has(r.group)||this.groupVolumes.set(r.group,1)}},a.start=function(){g.instance.gameEvents.on(h.PLAY_SFX,this.playSFXByID,this)},a.onDestroy=function(){g.instance.gameEvents.off(h.PLAY_SFX,this.playSFXByID,this)},a.playSFXByID=function(e){var t,r=this.sfxMap.get(e),n=this.sfxEntries.find((function(t){return t.id===e}));if(r&&n){var o=null!=(t=this.groupVolumes.get(n.group))?t:1;r?r.playOneShot(r.clip,o):console.warn("[SFXManager] Clip not found: "+e)}},a.setGroupVolume=function(e,t){this.groupVolumes.set(e,t)},a.muteGroup=function(e){this.setGroupVolume(e,0)},t}(l)).prototype,"sfxAudioSourcePrefab",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=t(S.prototype,"sfxEntries",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),M=S))||M));a._RF.pop()}}}));

System.register("chunks:///_virtual/SpecialQueue.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,n;return{setters:[function(t){e=t.createClass},function(t){n=t.cclegacy}],execute:function(){n._RF.push({},"3cd82bjJohBWqDNxcUYgqmP","SpecialQueue",void 0);t("SpecialQueue",function(){function t(){this.list=[]}var n=t.prototype;return n.enqueue=function(t){this.list.push(t)},n.dequeue=function(){return this.list.shift()},n.peek=function(){return this.list[0]},n.remove=function(t){var e=this.list.indexOf(t);return e>=0&&(this.list.splice(e,1),!0)},n.contains=function(t){return this.list.some((function(e){return e===t}))},e(t,[{key:"count",get:function(){return this.list.length}}]),t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/UIManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventManager.ts","./GameEvent.ts","./Card.ts","./Player.ts","./Dealer.ts","./ChipButton.ts","./SFXEnums.ts"],(function(t){"use strict";var e,n,i,a,r,o,s,l,c,u,h,p,d,f,b,g,m,v,B,C,E,y,P,A,I;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,a=t.assertThisInitialized,r=t.createForOfIteratorHelperLoose,o=t.asyncToGenerator,s=t.regeneratorRuntime},function(t){l=t.cclegacy,c=t._decorator,u=t.Prefab,h=t.Label,p=t.Button,d=t.Node,f=t.instantiate,b=t.Vec2,g=t.Vec3,m=t.Component,v=t.tween},function(t){B=t.EventManager},function(t){C=t.GameEvent},function(t){E=t.Card},function(t){y=t.Player},function(t){P=t.Dealer},function(t){A=t.ChipButton},function(t){I=t.SFXID}],execute:function(){var S,w,D,_,k,L,T,R,H,z,N,F,U,x,M,G,X,V,Y,O,K,W,j,Q,$,q,J,Z,tt,et,nt,it,at,rt,ot,st,lt,ct,ut,ht,pt;l._RF.push({},"b1d26QNaihKl45SG/arX042","UIManager",void 0);var dt=c.ccclass,ft=c.property;t("UIManager",(S=dt("UIManager"),w=ft(u),D=ft(h),_=ft(p),k=ft(p),L=ft(p),T=ft(p),R=ft(p),H=ft(p),z=ft(d),N=ft(d),F=ft(h),U=ft(d),x=ft(h),M=ft(d),G=ft(p),X=ft(d),V=ft(d),Y=ft(u),O=ft(h),S((j=e((W=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return e=t.call.apply(t,[this].concat(r))||this,i(e,"cardPrefab",j,a(e)),i(e,"resultLabel",Q,a(e)),i(e,"dealButton",$,a(e)),i(e,"hitButton",q,a(e)),i(e,"standButton",J,a(e)),i(e,"doubleButton",Z,a(e)),i(e,"resetButton",tt,a(e)),i(e,"splitButton",et,a(e)),i(e,"deckPosition",nt,a(e)),i(e,"playerCardContainers",it,a(e)),i(e,"playerScoreLabels",at,a(e)),i(e,"handIndicators",rt,a(e)),i(e,"dealerScoreLabel",ot,a(e)),i(e,"dealerCardContainer",st,a(e)),i(e,"potResetButton",lt,a(e)),i(e,"bettingArea",ct,a(e)),i(e,"potArea",ut,a(e)),i(e,"chipButtonPrefab",ht,a(e)),i(e,"totalBet",pt,a(e)),e.chipButtons=[],e.chipStacks=new Map,e.chipStackPositions=new Map,e.playerAnimationInProgress=0,e.dealerAnimationInProgress=0,e.playerHandCount=0,e}n(e,t);var l=e.prototype;return l.start=function(){B.instance.gameEvents.on(C.CHIP_ENTRY_READY,this.setupChipButtons,this),B.instance.gameEvents.on(C.ADD_CHIP_UI,this.addChip,this),B.instance.gameEvents.on(C.UPDATE_BET_VALUE,this.updateBetValue,this),B.instance.gameEvents.on(C.GAME_STARTED,this.onGameStarted,this),B.instance.gameEvents.on(C.DEAL_CARD,this.addCardToParticipant,this),B.instance.gameEvents.on(C.SPLIT_HAND,this.animateSplitHand,this),B.instance.gameEvents.on(C.CHANGE_HAND,this.changeHand,this),B.instance.gameEvents.on(C.GAME_ENDED,this.displayResult,this),B.instance.gameEvents.on(C.GAME_RESET,this.resetUI,this),B.instance.gameEvents.on(C.DEALER_TURN_END,this.flipDealerCards,this),B.instance.gameEvents.on(C.LOCK_INPUT,this.lockInput,this),B.instance.gameEvents.on(C.UNLOCK_INPUT,this.unlockInput,this),this.attachPlaySFXToButton(this.node.parent),this.resetUI()},l.resetUI=function(){console.log("Resetting UI..."),this.dealButton.interactable=!1,this.dealButton.node.active=!0,this.hitButton.node.active=!1,this.standButton.node.active=!1,this.doubleButton.node.active=!1,this.resultLabel.node.active=!1,this.resetButton.node.active=!1,this.splitButton.node.active=!1,this.playerScoreLabels.forEach((function(t){t.node.active=!1})),this.dealerScoreLabel.node.active=!1,this.playerCardContainers.forEach((function(t){t.removeAllChildren()})),this.dealerCardContainer.removeAllChildren(),this.chipButtons.forEach((function(t){t.setInteractable(!0)})),this.handIndicators.forEach((function(t){t.active=!1})),this.potArea.removeAllChildren(),this.resetPot(),this.playerHandCount=0},l.onDestroy=function(){B.instance.gameEvents.off(C.CHIP_ENTRY_READY,this.setupChipButtons,this),B.instance.gameEvents.off(C.ADD_CHIP_UI,this.addChip,this),B.instance.gameEvents.off(C.UPDATE_BET_VALUE,this.updateBetValue,this),B.instance.gameEvents.off(C.GAME_STARTED,this.onGameStarted,this),B.instance.gameEvents.off(C.DEAL_CARD,this.addCardToParticipant,this),B.instance.gameEvents.off(C.GAME_ENDED,this.displayResult,this),B.instance.gameEvents.off(C.GAME_RESET,this.resetUI,this),B.instance.gameEvents.off(C.DEALER_TURN_END,this.flipDealerCards,this)},l.setupChipButtons=function(t){for(var e=0;e<t.length;e++){var n=t[e],i=f(this.chipButtonPrefab);i.setParent(this.bettingArea);var a=i.getComponent(A);this.chipButtons.push(a),a.setup(n),i.setPosition(0,0)}},l.addChip=function(t){var e=0;this.chipStackPositions.has(t.value)||(this.chipStacks.set(t.value,0),this.chipStackPositions.set(t.value,new b(this.chipStackPositions.size,0)));var n=this.chipStacks.get(t.value),i=this.chipStackPositions.get(t.value).x;if(e=this.chipStackPositions.get(t.value).y+1,n>=20)console.log("Too many chips for one type, stop displaying new chip");else{n%5==0&&(e=e-5-4);var a=f(this.chipButtonPrefab);a.setParent(this.potArea);var r=a.getComponent(A);r.setup(t),r.setInteractable(!1),a.setPosition(0+60*i,0+10*e),this.chipStacks.set(t.value,n+1),this.chipStackPositions.set(t.value,new b(i,e)),this.potResetButton.interactable=!0}},l.updateBetValue=function(t){this.totalBet.string="Bet: $"+t,t>0?this.dealButton.interactable=!0:(this.dealButton.interactable=!1,this.resetPot())},l.resetPot=function(){this.potArea.removeAllChildren(),this.chipStacks.clear(),this.chipStackPositions.clear(),this.potResetButton.interactable=!1,B.instance.gameEvents.emit(C.PLAY_SFX,I.Chip,this)},l.onGameStarted=function(t){if(this.dealButton.node.active=!1,this.hitButton.node.active=!0,this.standButton.node.active=!0,this.doubleButton.node.active=!0,this.splitButton.node.active=!0,this.chipButtons.forEach((function(t){t.setInteractable(!1)})),t.canSplit())this.splitButton.interactable=!0;else{this.splitButton.interactable=!1;var e=this.splitButton.transition;this.splitButton.transition=p.Transition.COLOR,this.splitButton.transition=e}this.playerHandCount++},l.addCardToParticipant=function(){var t=o(s().mark((function t(e){var n,i,a,r;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.potResetButton.interactable=!1,n=null,e instanceof y?(i=e.getIndex(),n=this.playerCardContainers[i]):e instanceof P&&(n=this.dealerCardContainer),a=e.getHand(),r=n.children.length;case 5:if(!(r<a.length)){t.next=11;break}return t.next=8,this.animateCardToHand(e,n);case 8:r++,t.next=5;break;case 11:B.instance.gameEvents.emit(C.ANIMATION_FINISHED,e);case 12:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),l.animateCardToHand=function(){var t=o(s().mark((function t(e,n){var i,a,r,l,c,u,h,p,d=this;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(B.instance.gameEvents.emit(C.PLAY_SFX,I.CardDeal),i=e.getHand(),!((a=n.children.length)>=i.length)){t.next=5;break}return t.abrupt("return");case 5:return r=i[a],l=f(this.cardPrefab),(c=l.addComponent(E)).init(r),e instanceof y?(r.isFaceDown=!1,this.playerAnimationInProgress++,h=e.getIndex(),u=this.playerScoreLabels[h]):e instanceof P&&(r.isFaceDown=0===a&&!e.revealAll,this.dealerAnimationInProgress++,u=this.dealerScoreLabel),n.addChild(l),l.setWorldPosition(this.deckPosition.getWorldPosition()),p=this.getCardTargetPosition(a),t.next=15,new Promise((function(t){v(l).to(.5,{position:p}).call(o(s().mark((function t(){return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r.isFaceDown){t.next=7;break}return e instanceof y&&console.log("Animating for Player"),t.next=4,c.flipCard();case 4:e instanceof y&&console.log("Done animating for Player"),d.checkRemainingAnimation(e),u.string="Hand Value: "+e.getHandValue();case 7:case"end":return t.stop()}}),t)})))).call(t).start()}));case 15:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}(),l.flipDealerCards=function(){var t=o(s().mark((function t(){var e,n,i;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this.dealerCardContainer.children,n=e[0],!(i=n.getComponent(E)).isFaceDown){t.next=7;break}return t.next=6,i.flipCard();case 6:this.checkRemainingAnimation(new P);case 7:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),l.animateSplitHand=function(){var t=o(s().mark((function t(){var e,n,i,a,r;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return B.instance.gameEvents.emit(C.PLAY_SFX,I.CardDeal),e=this.playerCardContainers[0],n=this.playerCardContainers[1],i=e.children[1],a=i.worldPosition.clone(),i.removeFromParent(),n.addChild(i),i.setWorldPosition(a),r=this.getCardTargetPosition(0),t.next=11,new Promise((function(t){v(i).to(.5,{position:r}).call(t).start()}));case 11:this.splitButton.interactable=!1,this.handIndicators[0].active=!0,this.playerHandCount++;case 14:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),l.changeHand=function(t){1!=this.playerHandCount&&(this.handIndicators.forEach((function(t){t.active=!1})),this.handIndicators[t].active=!0)},l.checkRemainingAnimation=function(t){t instanceof y?this.playerAnimationInProgress--:t instanceof P&&this.dealerAnimationInProgress--,console.log("Player animations left:",this.playerAnimationInProgress,"Dealer animations left:",this.dealerAnimationInProgress),(this.playerAnimationInProgress<=0&&t instanceof y||this.dealerAnimationInProgress<=0&&t instanceof P)&&(console.log("All animations finished."),B.instance.gameEvents.emit(C.ANIMATION_FINISHED,t))},l.getCardTargetPosition=function(t){var e=t%13*50,n=-40*Math.floor(t/13);return new g(e,n,0)},l.displayResult=function(t){console.log("Game Result:",t),this.resultLabel.node.active=!0,this.resultLabel.string=t,this.hitButton.node.active=!1,this.standButton.node.active=!1,this.resetButton.node.active=!0,this.doubleButton.node.active=!1,this.splitButton.node.active=!1;for(var e=0;e<this.playerHandCount;e++)this.playerScoreLabels[e].node.active=!0;this.handIndicators.forEach((function(t){t.active=!1})),this.dealerScoreLabel.node.active=!0},l.attachPlaySFXToButton=function(t){for(var e,n=t.getComponentsInChildren(p),i=r(n);!(e=i()).done;){e.value.node.on(p.EventType.CLICK,this.playButtonSFX,this)}},l.playButtonSFX=function(){B.instance.gameEvents.emit(C.PLAY_SFX,I.ButtonClick)},l.lockInput=function(){this.dealButton.interactable=!1,this.hitButton.interactable=!1,this.standButton.interactable=!1,this.doubleButton.interactable=!1,this.resetButton.interactable=!1,this.splitButton.interactable=!1},l.unlockInput=function(){this.dealButton.interactable=!0,this.hitButton.interactable=!0,this.standButton.interactable=!0,this.doubleButton.interactable=!0,this.resetButton.interactable=!0},e}(m)).prototype,"cardPrefab",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=e(W.prototype,"resultLabel",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=e(W.prototype,"dealButton",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=e(W.prototype,"hitButton",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=e(W.prototype,"standButton",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=e(W.prototype,"doubleButton",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),tt=e(W.prototype,"resetButton",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),et=e(W.prototype,"splitButton",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),nt=e(W.prototype,"deckPosition",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),it=e(W.prototype,"playerCardContainers",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),at=e(W.prototype,"playerScoreLabels",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),rt=e(W.prototype,"handIndicators",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ot=e(W.prototype,"dealerScoreLabel",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),st=e(W.prototype,"dealerCardContainer",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),lt=e(W.prototype,"potResetButton",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ct=e(W.prototype,"bettingArea",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ut=e(W.prototype,"potArea",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ht=e(W.prototype,"chipButtonPrefab",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),pt=e(W.prototype,"totalBet",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=W))||K));l._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});