{"version":3,"sources":["file:///Users/phuongduy/CardDeck/assets/scripts/Managers/BetManager.ts"],"names":["_decorator","Component","ChipEntry","EventManager","GameEvent","ccclass","property","BetManager","type","selectedChips","currentBet","start","instance","gameEvents","on","CHIP_SELECTED","addChip","emit","CHIP_ENTRY_READY","chips","onDestroy","off","chip","console","log","value","maxBet","warn","push","ADD_CHIP_UI","clearBet","getTotalBet","getSelectedChips"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;;AAEZC,MAAAA,S,iBAAAA,S;;AACAC,MAAAA,Y,iBAAAA,Y;;AACAC,MAAAA,S,iBAAAA,S;;;;;;;;;OAHH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBN,U;;4BAMjBO,U,WADZF,OAAO,CAAC,YAAD,C,UAEHC,QAAQ,CAAC;AAAEE,QAAAA,IAAI,EAAE;AAAA;AAAA;AAAR,OAAD,C,UAGRF,QAAQ,E,2BALb,MACaC,UADb,SACgCN,SADhC,CAC0C;AAAA;AAAA;;AAAA;;AAAA;;AAAA,eAO9BQ,aAP8B,GAOD,EAPC;AAAA,eAQ9BC,UAR8B;AAAA;;AAUtCC,QAAAA,KAAK,GAAG;AACJ;AAAA;AAAA,4CAAaC,QAAb,CAAsBC,UAAtB,CAAiCC,EAAjC,CAAoC;AAAA;AAAA,sCAAUC,aAA9C,EAA6D,KAAKC,OAAlE,EAA2E,IAA3E;AACA;AAAA;AAAA,4CAAaJ,QAAb,CAAsBC,UAAtB,CAAiCI,IAAjC,CAAsC;AAAA;AAAA,sCAAUC,gBAAhD,EAAkE,KAAKC,KAAvE,EAA8E,IAA9E;AACH;;AAEDC,QAAAA,SAAS,GAAG;AACR;AAAA;AAAA,4CAAaR,QAAb,CAAsBC,UAAtB,CAAiCQ,GAAjC,CAAqC;AAAA;AAAA,sCAAUN,aAA/C,EAA8D,KAAKC,OAAnE,EAA4E,IAA5E;AACH;;AAEMA,QAAAA,OAAO,CAACM,IAAD,EAAkB;AAC5BC,UAAAA,OAAO,CAACC,GAAR,CAAY,kBAAkB,KAAKd,UAAnC;;AACA,cAAI,KAAKA,UAAL,GAAkBY,IAAI,CAACG,KAAvB,GAA+B,KAAKC,MAAxC,EAAgD;AAC5CH,YAAAA,OAAO,CAACI,IAAR,CAAa,iBAAb;AACA;AACH;;AAED,eAAKlB,aAAL,CAAmBmB,IAAnB,CAAwBN,IAAxB;AACA,eAAKZ,UAAL,IAAmBY,IAAI,CAACG,KAAxB;AACA;AAAA;AAAA,4CAAab,QAAb,CAAsBC,UAAtB,CAAiCI,IAAjC,CAAsC;AAAA;AAAA,sCAAUY,WAAhD,EAA6DP,IAA7D,EAAmE,IAAnE;AACH;;AAEMQ,QAAAA,QAAQ,GAAG;AACd,eAAKrB,aAAL,GAAqB,EAArB;AACA,eAAKC,UAAL,GAAkB,CAAlB;AACH;;AAEMqB,QAAAA,WAAW,GAAW;AACzB,iBAAO,KAAKrB,UAAZ;AACH;;AAEMsB,QAAAA,gBAAgB,GAAgB;AACnC,iBAAO,CAAC,GAAG,KAAKvB,aAAT,CAAP;AACH;;AA1CqC,O;;;;;iBAET,E;;;;;;;iBAGJ,G","sourcesContent":["import { _decorator, Component, JsonAsset, Node, resources, SpriteFrame, SpriteAtlas, instantiate, Game } from 'cc';\nconst { ccclass, property } = _decorator;\nimport { ChipEntry } from '../Chip/ChipEntry';\nimport { EventManager } from './EventManager';\nimport { GameEvent } from '../enums/GameEvent';\n\n@ccclass('BetManager')\nexport class BetManager extends Component {\n    @property({ type: [ChipEntry] })\n    private chips: ChipEntry[] = [];\n\n    @property()\n    private maxBet: number = 500;\n\n    private selectedChips: ChipEntry[] = [];\n    private currentBet: number;\n\n    start() {\n        EventManager.instance.gameEvents.on(GameEvent.CHIP_SELECTED, this.addChip, this);\n        EventManager.instance.gameEvents.emit(GameEvent.CHIP_ENTRY_READY, this.chips, this);\n    }\n\n    onDestroy() {\n        EventManager.instance.gameEvents.off(GameEvent.CHIP_SELECTED, this.addChip, this);\n    }\n\n    public addChip(chip: ChipEntry) {\n        console.log('Current bet: ' + this.currentBet);\n        if (this.currentBet + chip.value > this.maxBet) {\n            console.warn(\"Max bet reached\");\n            return;\n        }\n\n        this.selectedChips.push(chip);\n        this.currentBet += chip.value;\n        EventManager.instance.gameEvents.emit(GameEvent.ADD_CHIP_UI, chip, this);\n    }\n\n    public clearBet() {\n        this.selectedChips = [];\n        this.currentBet = 0;\n    }\n\n    public getTotalBet(): number {\n        return this.currentBet;\n    }\n\n    public getSelectedChips(): ChipEntry[] {\n        return [...this.selectedChips];\n    }\n\n}\n\n"]}