{"version":3,"sources":["file:///Users/phuongduy/CardDeck/assets/scripts/DeckManager.ts"],"names":["_decorator","Component","JsonAsset","resources","SpriteFrame","Prefab","instantiate","Card","ccclass","property","DeckManager","deck","start","deckCount","length","i","cardData","console","log","rank","suit","spriteFrame","cardNode","cardPrefab","setPosition","Math","floor","node","addChild","card","addComponent","init","onLoad","load","err","asset","error","json","loadSprites","sprite","update","deltaTime"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,S,OAAAA,S;AAAiBC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,W,OAAAA,W;AAAaC,MAAAA,M,OAAAA,M;AAAQC,MAAAA,W,OAAAA,W;;AAGxEC,MAAAA,I,iBAAAA,I;;;;;;;;;OAFH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBT,U;;6BAKjBU,W,WADZF,OAAO,CAAC,aAAD,C,UAGHC,QAAQ,CAACJ,MAAD,C,2BAHb,MACaK,WADb,SACiCT,SADjC,CAC2C;AAAA;AAAA;;AAAA;;AAAA,eAK/BU,IAL+B,GAKZ,EALY;AAAA;;AAOvCC,QAAAA,KAAK,GAAG;AACJ,cAAIC,SAAS,GAAG,KAAKF,IAAL,CAAUG,MAA1B;;AACA,eAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGF,SAApB,EAA+BE,CAAC,EAAhC,EAAoC;AAChC,gBAAMC,QAAQ,GAAG,KAAKL,IAAL,CAAUI,CAAV,CAAjB;AACAE,YAAAA,OAAO,CAACC,GAAR,CAAY,gBAAZ,EAA8BF,QAAQ,CAACG,IAAvC,EAA6C,IAA7C,EAAmDH,QAAQ,CAACI,IAA5D,EAAkEJ,QAAQ,CAACK,WAA3E;AACA,gBAAMC,QAAQ,GAAGhB,WAAW,CAAC,KAAKiB,UAAN,CAA5B;AACAD,YAAAA,QAAQ,CAACE,WAAT,CAAsBT,CAAC,GAAG,EAAL,GAAW,EAAhC,EAAoCU,IAAI,CAACC,KAAL,CAAWX,CAAC,GAAG,EAAf,IAAqB,CAAC,EAA1D,EAA8D,CAA9D;AACA,iBAAKY,IAAL,CAAUC,QAAV,CAAmBN,QAAnB;AACA,gBAAIO,IAAI,GAAGP,QAAQ,CAACQ,YAAT;AAAA;AAAA,6BAAX;AACAD,YAAAA,IAAI,CAACE,IAAL,CAAUf,QAAV;AACH;AACJ;;AAEDgB,QAAAA,MAAM,GAAG;AACL7B,UAAAA,SAAS,CAAC8B,IAAV,CAAe,MAAf,EAAuB/B,SAAvB,EAAkC,CAACgC,GAAD,EAAMC,KAAN,KAAgB;AAC9C,gBAAID,GAAJ,EAAS;AACLjB,cAAAA,OAAO,CAACmB,KAAR,CAAc,2BAAd,EAA2CF,GAA3C;AACA;AACH;;AACD,iBAAKvB,IAAL,GAAYwB,KAAK,CAACE,IAAlB;AACA,iBAAKC,WAAL;AACH,WAPD;AAQH;;AAEDA,QAAAA,WAAW,GAAG;AAAA,qCACCT,IADD;AAEN1B,YAAAA,SAAS,CAAC8B,IAAV,CAAe,mBAAiBJ,IAAI,CAACU,MAAtB,GAA6B,cAA5C,EAA4DnC,WAA5D,EAAyE,CAAC8B,GAAD,EAAWb,WAAX,KAA2B;AAChG,kBAAI,CAACa,GAAL,EAAU;AACNL,gBAAAA,IAAI,CAACR,WAAL,GAAmBA,WAAnB;AACH,eAFD,MAEO;AACHJ,gBAAAA,OAAO,CAACmB,KAAR,gCAA2CP,IAAI,CAACV,IAAhD,YAA2DU,IAAI,CAACT,IAAhE,QAAyEc,GAAzE;AACH;AACJ,aAND;AAOAjB,YAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ,EAA0BW,IAA1B;AATM;;AACV,eAAK,IAAMA,IAAX,IAAmB,KAAKlB,IAAxB,EAA8B;AAAA,kBAAnBkB,IAAmB;AAS7B;AACJ;;AAEDW,QAAAA,MAAM,CAACC,SAAD,EAAoB,CAEzB;;AA9CsC,O;;;;;iBAGV,I","sourcesContent":["import { _decorator, Component, JsonAsset, Node, resources, SpriteFrame, Prefab, instantiate } from 'cc';\nconst { ccclass, property } = _decorator;\nimport { CardData } from './CardData';\nimport { Card } from './Card';\n\n@ccclass('DeckManager')\nexport class DeckManager extends Component {\n\n    @property(Prefab)\n    private cardPrefab: Prefab = null!;\n\n    private deck: CardData[] = [];\n\n    start() {\n        let deckCount = this.deck.length;\n        for (let i = 0; i < deckCount; i++) {\n            const cardData = this.deck[i];\n            console.log('Creating card:', cardData.rank, 'of', cardData.suit, cardData.spriteFrame);\n            const cardNode = instantiate(this.cardPrefab);\n            cardNode.setPosition((i % 13) * 30, Math.floor(i / 13) * -40, 0);\n            this.node.addChild(cardNode);\n            let card = cardNode.addComponent(Card);\n            card.init(cardData);\n        }\n    }\n\n    onLoad() {\n        resources.load('deck', JsonAsset, (err, asset) => {\n            if (err) {\n                console.error('Failed to load card data:', err);\n                return;\n            }\n            this.deck = asset.json as CardData[];\n            this.loadSprites();\n        });\n    }\n\n    loadSprites() {\n        for (const card of this.deck) {\n            resources.load('sprites/Cards/'+card.sprite+'/spriteFrame', SpriteFrame, (err: any, spriteFrame) => {\n                if (!err) {\n                    card.spriteFrame = spriteFrame;\n                } else {\n                    console.error(`Failed to load sprite for ${card.rank} of ${card.suit}:`, err);\n                }\n            });\n            console.log('Card Data:', card);\n        }\n    }\n\n    update(deltaTime: number) {\n        \n    }\n}\n\n"]}