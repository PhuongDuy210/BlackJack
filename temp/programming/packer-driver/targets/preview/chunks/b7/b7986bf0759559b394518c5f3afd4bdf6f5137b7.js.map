{"version":3,"sources":["file:///Users/phuongduy/CardDeck/assets/scripts/AudioSystem/BGMManager.ts"],"names":["_decorator","Component","AudioSource","BGMEntry","ccclass","property","BGMManager","type","bgmMap","Map","onLoad","entry","bgmEntries","set","id","clip","playBGM","loop","get","bgmSource","stop","play"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,W,OAAAA,W;;AAIvBC,MAAAA,Q,iBAAAA,Q;;;;;;;;;OAHH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBL,U;;4BAMjBM,U,WADZF,OAAO,CAAC,YAAD,C,UAEHC,QAAQ,CAACH,WAAD,C,UAGRG,QAAQ,CAAC;AAAEE,QAAAA,IAAI,EAAE;AAAA;AAAA;AAAR,OAAD,C,2BALb,MACaD,UADb,SACgCL,SADhC,CAC0C;AAAA;AAAA;;AAAA;;AAAA;;AAAA,eAO9BO,MAP8B,GAOE,IAAIC,GAAJ,EAPF;AAAA;;AAStCC,QAAAA,MAAM,GAAG;AACL,eAAK,IAAMC,KAAX,IAAoB,KAAKC,UAAzB,EAAqC;AACjC,iBAAKJ,MAAL,CAAYK,GAAZ,CAAgBF,KAAK,CAACG,EAAtB,EAA0BH,KAAK,CAACI,IAAhC;AACH;AACJ;;AAEMC,QAAAA,OAAO,CAACF,EAAD,EAAYG,IAAZ,EAAyB;AAAA,cAAbA,IAAa;AAAbA,YAAAA,IAAa,GAAN,IAAM;AAAA;;AACnC,cAAMF,IAAI,GAAG,KAAKP,MAAL,CAAYU,GAAZ,CAAgBJ,EAAhB,CAAb;AACA,cAAI,CAACC,IAAL,EAAW;AAEX,eAAKI,SAAL,CAAeC,IAAf;AACA,eAAKD,SAAL,CAAeJ,IAAf,GAAsBA,IAAtB;AACA,eAAKI,SAAL,CAAeF,IAAf,GAAsBA,IAAtB;AACA,eAAKE,SAAL,CAAeE,IAAf;AACH;;AAvBqC,O;;;;;;;;;;iBAKb,E","sourcesContent":["import { _decorator, Component, AudioSource, AudioClip, instantiate } from 'cc';\nconst { ccclass, property } = _decorator;\n\nimport { BGMID } from \"./BGMID\";\nimport { BGMEntry } from \"./BGMEntry\";\n\n@ccclass('BGMManager')\nexport class BGMManager extends Component {\n    @property(AudioSource)\n    private bgmSource;\n\n    @property({ type: [BGMEntry] })\n    bgmEntries: BGMEntry[] = [];\n\n    private bgmMap: Map<BGMID, AudioClip> = new Map();\n\n    onLoad() {\n        for (const entry of this.bgmEntries) {\n            this.bgmMap.set(entry.id, entry.clip);\n        }\n    }\n    \n    public playBGM(id: BGMID, loop = true) {\n        const clip = this.bgmMap.get(id);\n        if (!clip) return;\n\n        this.bgmSource.stop();\n        this.bgmSource.clip = clip;\n        this.bgmSource.loop = loop;\n        this.bgmSource.play();\n    }\n}\n"]}