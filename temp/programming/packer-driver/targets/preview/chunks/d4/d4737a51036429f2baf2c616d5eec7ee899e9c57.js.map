{"version":3,"sources":["file:///Users/phuongduy/CardDeck/assets/scripts/DeckManager.ts"],"names":["_decorator","Component","JsonAsset","resources","SpriteFrame","Prefab","ccclass","property","DeckManager","deck","start","deckCount","length","i","cardData","cardNode","instantiate","cardPrefab","setPosition","Math","floor","node","addChild","cardComponent","getComponent","setCardData","onLoad","load","err","asset","console","error","json","loadSprites","card","sprite","spriteFrame","update","deltaTime"],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,S,OAAAA,S;AAAiBC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,W,OAAAA,W;AAAaC,MAAAA,M,OAAAA,M;;;;;;;;;OACnE;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBP,U;;6BAIjBQ,W,WADZF,OAAO,CAAC,aAAD,C,UAGHC,QAAQ,CAACF,MAAD,C,2BAHb,MACaG,WADb,SACiCP,SADjC,CAC2C;AAAA;AAAA;;AAAA;;AAAA,eAiBvCQ,IAjBuC,GAiBpB,EAjBoB;AAAA;;AAKvCC,QAAAA,KAAK,GAAG;AACJ,cAAIC,SAAS,GAAG,KAAKF,IAAL,CAAUG,MAA1B;;AACA,eAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGF,SAApB,EAA+BE,CAAC,EAAhC,EAAoC;AAChC,gBAAMC,QAAQ,GAAG,KAAKL,IAAL,CAAUI,CAAV,CAAjB;AACA,gBAAME,QAAQ,GAAGZ,SAAS,CAACa,WAAV,CAAsB,KAAKC,UAA3B,CAAjB;AACAF,YAAAA,QAAQ,CAACG,WAAT,CAAsBL,CAAC,GAAG,EAAL,GAAW,EAAhC,EAAoCM,IAAI,CAACC,KAAL,CAAWP,CAAC,GAAG,EAAf,IAAqB,CAAC,EAA1D,EAA8D,CAA9D;AACA,iBAAKQ,IAAL,CAAUC,QAAV,CAAmBP,QAAnB;AACA,gBAAMQ,aAAa,GAAGR,QAAQ,CAACS,YAAT,CAAsB,MAAtB,CAAtB;AACAD,YAAAA,aAAa,CAACE,WAAd,CAA0BX,QAA1B;AACH;AACJ;;AAIDY,QAAAA,MAAM,GAAG;AACLvB,UAAAA,SAAS,CAACwB,IAAV,CAAe,WAAf,EAA4BzB,SAA5B,EAAuC,CAAC0B,GAAD,EAAMC,KAAN,KAAgB;AACnD,gBAAID,GAAJ,EAAS;AACLE,cAAAA,OAAO,CAACC,KAAR,CAAc,2BAAd,EAA2CH,GAA3C;AACA;AACH;;AACD,iBAAKnB,IAAL,GAAYoB,KAAK,CAACG,IAAlB;AACA,iBAAKC,WAAL;AACH,WAPD;AAQH;;AAEDA,QAAAA,WAAW,GAAG;AAAA,qCACCC,IADD;AAEN/B,YAAAA,SAAS,CAACwB,IAAV,cAA0BO,IAAI,CAACC,MAA/B,WAA6C/B,WAA7C,EAA0D,CAACwB,GAAD,EAAMQ,WAAN,KAAsB;AAC5E,kBAAI,CAACR,GAAL,EAAUM,IAAI,CAACE,WAAL,GAAmBA,WAAnB;AACb,aAFD;AAFM;;AACV,eAAK,IAAMF,IAAX,IAAmB,KAAKzB,IAAxB,EAA8B;AAAA,kBAAnByB,IAAmB;AAI7B;AACJ;;AAEDG,QAAAA,MAAM,CAACC,SAAD,EAAoB,CAEzB;;AAxCsC,O;;;;;iBAGlB,I","sourcesContent":["import { _decorator, Component, JsonAsset, Node, resources, SpriteFrame, Prefab, instantiate } from 'cc';\nconst { ccclass, property } = _decorator;\nimport { CardData } from './CardData';\n\n@ccclass('DeckManager')\nexport class DeckManager extends Component {\n\n    @property(Prefab)\n    cardPrefab: Prefab = null!;\n\n    start() {\n        let deckCount = this.deck.length;\n        for (let i = 0; i < deckCount; i++) {\n            const cardData = this.deck[i];\n            const cardNode = resources.instantiate(this.cardPrefab);\n            cardNode.setPosition((i % 13) * 30, Math.floor(i / 13) * -40, 0);\n            this.node.addChild(cardNode);\n            const cardComponent = cardNode.getComponent('Card') as any;\n            cardComponent.setCardData(cardData);\n        }\n    }\n\n    deck: CardData[] = [];\n\n    onLoad() {\n        resources.load('deck.json', JsonAsset, (err, asset) => {\n            if (err) {\n                console.error('Failed to load card data:', err);\n                return;\n            }\n            this.deck = asset.json as CardData[];\n            this.loadSprites();\n        });\n    }\n\n    loadSprites() {\n        for (const card of this.deck) {\n            resources.load(`sprites/${card.sprite}.png`, SpriteFrame, (err, spriteFrame) => {\n                if (!err) card.spriteFrame = spriteFrame;\n            });\n        }\n    }\n\n    update(deltaTime: number) {\n        \n    }\n}\n\n"]}